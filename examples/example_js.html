<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PGRest JS Example</title>
    
</head>
<body>
    <h1>Check log for result</h1>
    <script type="module">
        import { PGRestClient } from './pgrest_js_client/pgrest_client.mjs';
        const url = "http://localhost:8080/api/query";
        const clientID = "pgrest";
        const clientSecret = "98265691-8b9e-44dc-acf9-94610c392c00";
        const query = "SELECT entity_id, date_timestamp, temperature FROM datacore.knmi_historical_weather_measurement limit 10";

        const client = new PGRestClient(url, clientID, clientSecret);

            async function test() {
                try {
                    const result = await client.query(query);
                    logResult(result);
                } catch (error) {
                    console.log("An error occurred while executing the query:", error);
                    logError(error);
                }
            }

            function logResult(result) {
                console.table(result.data);
                console.log(`Execution time: ${result.executionTime}`);
            }

            function logError(error) {
                console.error("--------------------------------");
                console.error(`${error.status} - ${error.statusText}`);
                console.error("--------------------------------");
                console.error(`Message: ${error.error}`);
                if(error.details) {
                    console.error(`Details: ${error.details}`);
                }
            }

            test();
    </script>
</body>
</html>